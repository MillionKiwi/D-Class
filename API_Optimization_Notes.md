# API 명세서 최적화 가이드

## 📋 개요
이 문서는 API 명세서에서 프론트엔드에서 처리 가능한 부분들을 식별하고, 불필요한 API 호출을 제거하기 위한 가이드입니다.

---

## ❌ 제거/수정이 필요한 API 엔드포인트

### 1. **1.1 회원가입 - 역할 선택** ❌ 제거 권장
**현재**: `POST /auth/register/role/`

**이유**: 
- 역할 선택은 프론트엔드에서만 상태 관리하면 됩니다
- 회원가입 정보 입력 단계에서 `role`을 함께 전송하면 됩니다
- 별도의 API 호출이 불필요합니다

**대안**: 
- 프론트엔드에서 `role` 상태를 관리
- 회원가입 API (`POST /auth/register/`)에 `role` 포함하여 전송

---

## 🔄 수정이 필요한 API 요청/응답

### 2. **1.3 회원가입 - 정보 입력** - password_confirm 제거
**현재 요청 본문**:
```json
{
  "password": "SecurePass123!",
  "password_confirm": "SecurePass123!"  // ❌ 제거
}
```

**수정 후**:
```json
{
  "password": "SecurePass123!"
}
```

**이유**:
- 비밀번호 일치 여부는 프론트엔드에서 검증 가능
- 백엔드는 `password`만 받아서 저장
- 보안상 비밀번호 확인 필드를 서버로 전송할 필요 없음

**프론트엔드 처리**:
- 입력 시 실시간으로 비밀번호 일치 여부 확인
- 불일치 시 에러 메시지 표시 및 제출 버튼 비활성화

---

### 3. **2.4 비밀번호 변경** - new_password_confirm 제거
**현재 요청 본문**:
```json
{
  "old_password": "OldPassword123!",
  "new_password": "NewPassword123!",
  "new_password_confirm": "NewPassword123!"  // ❌ 제거
}
```

**수정 후**:
```json
{
  "old_password": "OldPassword123!",
  "new_password": "NewPassword123!"
}
```

**이유**: 위와 동일

---

### 4. **1.8 비밀번호 재설정** - password_confirm 제거
**현재 요청 본문**:
```json
{
  "token": "reset_token_from_email",
  "password": "NewPassword123!",
  "password_confirm": "NewPassword123!"  // ❌ 제거
}
```

**수정 후**:
```json
{
  "token": "reset_token_from_email",
  "password": "NewPassword123!"
}
```

---

## 📝 프론트엔드에서 처리할 검증 로직

### 5. **비밀번호 강도 검증**
**현재**: 백엔드에서 검증 후 에러 반환

**프론트엔드 처리**:
- 실시간으로 비밀번호 강도 표시 (약함/보통/강함)
- 정규식으로 검증: 8자 이상, 영문/숫자/특수문자 포함
- 제출 전 검증 통과 여부 확인

**백엔드**: 최종 검증만 수행 (보안을 위해)

---

### 6. **이메일 형식 검증**
**현재**: 백엔드에서 검증 후 에러 반환

**프론트엔드 처리**:
- 입력 시 실시간 이메일 형식 검증
- 정규식으로 기본 형식 확인
- 제출 전 검증 통과 여부 확인

**백엔드**: 최종 검증만 수행

---

### 7. **전화번호 형식 검증**
**프론트엔드 처리**:
- 입력 시 자동 포맷팅 (010-1234-5678)
- 정규식으로 형식 검증
- 숫자만 입력받고 자동으로 하이픈 추가

---

### 8. **글자 수 제한 (bio, description 등)**
**프론트엔드 처리**:
- 실시간 글자 수 카운터 표시 (예: 325/500)
- 최대 글자 수 초과 시 입력 차단
- 최소 글자 수 미달 시 에러 메시지 표시

**백엔드**: 최종 검증만 수행

---

### 9. **필수 항목 검증**
**프론트엔드 처리**:
- 필수 항목 미입력 시 제출 버튼 비활성화
- 각 필드별 실시간 검증 및 에러 메시지 표시
- 제출 전 모든 필수 항목 검증 통과 여부 확인

**백엔드**: 최종 검증만 수행

---

### 10. **약관 동의 검증**
**프론트엔드 처리**:
- 필수 약관 미동의 시 제출 버튼 비활성화
- 전체 동의 체크박스로 일괄 처리
- 개별 약관 동의 상태 관리

**백엔드**: 약관 동의 여부는 저장 필요 (법적 요구사항)

---

### 11. **날짜 유효성 검증 (경력, 학력)**
**프론트엔드 처리**:
- 시작일이 종료일보다 늦을 수 없음
- 미래 날짜 선택 불가
- 날짜 형식 자동 포맷팅

---

### 12. **파일 크기 및 형식 검증**
**프론트엔드 처리**:
- 파일 선택 시 즉시 크기 확인 (10MB 이하)
- 파일 형식 확인 (JPG, PNG, PDF)
- 미리보기 제공
- 검증 실패 시 업로드 차단 및 에러 메시지

**백엔드**: 최종 검증만 수행 (보안을 위해)

---

### 13. **이미지 미리보기**
**프론트엔드 처리**:
- FileReader API로 로컬 이미지 미리보기
- 업로드 전 이미지 확인 가능
- 이미지 크기 조정 (선택사항)

---

## 🎨 프론트엔드에서 처리할 UI/UX 로직

### 14. **변경사항 감지 (프로필 수정 등)**
**프론트엔드 처리**:
- 원본 데이터와 현재 입력값 비교
- 변경사항 있을 때만 저장 버튼 활성화
- 뒤로가기 시 변경사항 확인 모달 표시

---

### 15. **필터링 및 정렬**
**프론트엔드 처리**:
- 필터 상태 관리 (지역, 장르, 시간대 등)
- 정렬 옵션 관리 (최신순, 급여순 등)
- 필터/정렬 변경 시 즉시 API 호출하여 목록 갱신

**백엔드**: 필터링된 결과만 반환

---

### 16. **페이지네이션**
**프론트엔드 처리**:
- 페이지 번호 상태 관리
- 무한 스크롤 구현 (선택사항)
- 페이지 이동 시 API 호출

**백엔드**: 페이지별 데이터만 반환

---

### 17. **검색어 Debounce**
**프론트엔드 처리**:
- 입력 후 500ms 대기 후 API 호출
- 연속 입력 시 이전 요청 취소
- 최소 글자 수 확인 (예: 2자 이상)

---

### 18. **최근 검색어 저장**
**프론트엔드 처리**:
- LocalStorage에 최근 검색어 저장
- 최대 개수 제한 (예: 10개)
- 삭제 기능

**백엔드**: ❌ 별도 API 불필요 (11.2, 11.3 제거 권장)

---

### 19. **뷰 전환 (리스트/지도)**
**프론트엔드 처리**:
- 뷰 상태 관리 (리스트/지도)
- 전환 시 즉시 UI 변경
- 각 뷰에 맞는 API 호출

---

### 20. **지도 클러스터링**
**프론트엔드 처리**:
- 지도 라이브러리(예: Kakao Map, Google Map)에서 클러스터링 처리
- 줌 레벨에 따른 클러스터 표시/해제
- 클러스터 클릭 시 확대

**백엔드**: 위치 정보만 반환

---

### 21. **상태별 탭 필터링**
**프론트엔드 처리**:
- 탭 상태 관리 (전체, 검토중, 합격, 불합격 등)
- 탭 클릭 시 쿼리 파라미터 변경하여 API 호출
- 또는 프론트엔드에서 필터링 (데이터가 적을 경우)

---

### 22. **정렬 옵션**
**프론트엔드 처리**:
- 정렬 옵션 상태 관리
- 정렬 변경 시 쿼리 파라미터 변경하여 API 호출

---

## 🔍 제거 권장 API 엔드포인트

### 23. **11.2 최근 검색어 조회** ❌ 제거 권장
**현재**: `GET /search/recent/`

**이유**: 
- LocalStorage로 충분히 처리 가능
- 서버 저장소 불필요

**대안**: 프론트엔드에서 LocalStorage 사용

---

### 24. **11.3 최근 검색어 삭제** ❌ 제거 권장
**현재**: `DELETE /search/recent/{keyword}/`

**이유**: 위와 동일

**대안**: 프론트엔드에서 LocalStorage에서 삭제

---

## ✅ 유지해야 할 API (백엔드 검증 필수)

### 25. **이메일 중복 확인** ✅ 유지
**이유**: 
- 데이터베이스 조회 필요
- 실시간 중복 확인 제공

---

### 26. **비밀번호 강도 검증** ✅ 백엔드 최종 검증 유지
**이유**: 
- 보안상 서버 측 검증 필수
- 프론트엔드 검증은 우회 가능

---

### 27. **파일 업로드 검증** ✅ 백엔드 최종 검증 유지
**이유**: 
- 보안상 서버 측 검증 필수
- 악의적인 파일 업로드 방지

---

## 📊 최적화 요약

### 제거 권장 API
1. `POST /auth/register/role/` - 역할 선택
2. `GET /search/recent/` - 최근 검색어 조회
3. `DELETE /search/recent/{keyword}/` - 최근 검색어 삭제

### 수정 필요 요청 필드
1. `password_confirm` - 모든 비밀번호 관련 API에서 제거
2. `new_password_confirm` - 비밀번호 변경 API에서 제거

### 프론트엔드에서 처리할 검증
- 비밀번호 일치 여부
- 비밀번호 강도 표시 (최종 검증은 백엔드)
- 이메일 형식 (최종 검증은 백엔드)
- 전화번호 형식
- 글자 수 제한
- 필수 항목 검증
- 약관 동의 UI
- 날짜 유효성
- 파일 크기/형식 (최종 검증은 백엔드)
- 이미지 미리보기

### 프론트엔드에서 처리할 UI/UX
- 변경사항 감지
- 필터링/정렬 상태 관리
- 페이지네이션
- 검색어 Debounce
- 최근 검색어 (LocalStorage)
- 뷰 전환
- 지도 클러스터링
- 상태별 탭 필터링

---

## 🎯 권장 사항

1. **이중 검증 원칙**
   - 프론트엔드: 사용자 경험 향상을 위한 실시간 검증
   - 백엔드: 보안을 위한 최종 검증 (필수)

2. **불필요한 API 호출 최소화**
   - 클라이언트 측에서 처리 가능한 것은 프론트엔드에서 처리
   - 서버 리소스 절약 및 응답 속도 향상

3. **LocalStorage 활용**
   - 최근 검색어, 뷰 설정 등 사용자 선호도는 LocalStorage에 저장
   - 서버 저장소 불필요

4. **실시간 검증**
   - 입력 시 즉시 피드백 제공
   - 제출 전 모든 검증 통과 확인

---

## 📝 수정된 API 명세서 반영 사항

위 내용을 반영하여 API 명세서를 수정할 때 다음을 적용하세요:

1. **1.1 회원가입 - 역할 선택** 섹션 제거
2. 모든 `password_confirm` 필드 제거
3. **11.2 최근 검색어 조회** 섹션 제거
4. **11.3 최근 검색어 삭제** 섹션 제거
5. 각 API의 에러 응답에서 프론트엔드 검증 가능한 항목은 "백엔드 최종 검증"으로 명시

---

**작성일**: 2025년 1월  
**버전**: 1.0

