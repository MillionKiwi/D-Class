# 🎭 D-Class Mock API 테스트 가이드

## 📋 개요

백엔드 API 연결 전에 프론트엔드 기능을 테스트할 수 있도록 **MSW (Mock Service Worker)**를 사용한 Mock API 환경이 구축되어 있습니다.

## 🚀 빠른 시작

### 1. 개발 서버 실행

```bash
npm run dev
```

개발 서버가 시작되면 콘솔에 다음 메시지가 표시됩니다:

```
🎭 Mock API가 활성화되었습니다!
📋 사용 가능한 Mock 계정:
  강사1: instructor1@test.com / password123
  강사2: instructor2@test.com / password123
  학원1: academy1@test.com / password123
  학원2: academy2@test.com / password123
  관리자: admin@d-class.com / admin123!@#
```

### 2. Mock API 확인

브라우저 개발자 도구(F12) > Console 탭에서 API 요청/응답을 확인할 수 있습니다.

## 👥 테스트 계정

### 강사 계정

#### 강사1 - 김민지 (인증 완료)
- **이메일**: `instructor1@test.com`
- **비밀번호**: `password123`
- **특징**:
  - ✅ 인증 완료 상태
  - 10년 경력의 발레 강사
  - 이미 3개의 공고에 지원 (검토중 1개, 합격 1개, 불합격 1개)
  - 리뷰 작성 경험 있음

#### 강사2 - 이지훈 (인증 대기)
- **이메일**: `instructor2@test.com`
- **비밀번호**: `password123`
- **특징**:
  - ⏳ 인증 대기 중
  - 힙합 댄스 전문
  - 2개의 공고에 지원 중

#### 강사3 - 박서연 (미인증)
- **이메일**: `instructor3@test.com`
- **비밀번호**: `password123`
- **특징**:
  - ❌ 미인증 상태
  - 한국무용 전문
  - 지원 내역 없음

### 학원 계정

#### 학원1 - 강남발레아카데미 (인증 완료)
- **이메일**: `academy1@test.com`
- **비밀번호**: `password123`
- **특징**:
  - ✅ 사업자 인증 완료
  - 평점 4.8 (리뷰 24개)
  - 현재 3개의 공고 게시 중
  - 여러 지원자 보유

#### 학원2 - 서울현대무용학원 (인증 완료)
- **이메일**: `academy2@test.com`
- **비밀번호**: `password123`
- **특징**:
  - ✅ 사업자 인증 완료
  - 평점 4.5 (리뷰 15개)
  - 2개의 공고 게시 중

#### 학원3 - 힙합댄스스쿨 (인증 대기)
- **이메일**: `academy3@test.com`
- **비밀번호**: `password123`
- **특징**:
  - ⏳ 인증 대기 중
  - 평점 4.2 (리뷰 8개)
  - 1개의 공고 게시 중

### 관리자 계정

- **이메일**: `admin@d-class.com`
- **비밀번호**: `admin123!@#`

## 🎬 테스트 시나리오

### 시나리오 1: 강사 회원 가입 및 공고 지원 플로우

#### 1단계: 회원가입
1. 로그인 페이지에서 "회원가입" 클릭
2. 역할 선택: **강사** 선택
3. 정보 입력:
   - 이메일: `newteacher@test.com`
   - 비밀번호: `password123`
   - 이름: `테스트 강사`
   - 연락처: `010-9999-8888`
   - 전문 분야: 발레, 재즈댄스
4. 약관 동의 후 가입 완료

#### 2단계: 로그인 및 프로필 설정
1. 새로 생성한 계정으로 로그인
2. 마이페이지 > 프로필 관리
3. 자기소개, 경력, 학력 작성
4. 저장

#### 3단계: 인증 서류 제출
1. 마이페이지 > 인증 관리
2. 서류 업로드 (이미지 파일)
3. 인증 신청하기
4. 상태: **인증 대기**로 변경 확인

#### 4단계: 공고 검색 및 지원
1. 홈 > 공고 목록
2. 필터 사용:
   - 지역: 서울 > 강남구
   - 장르: 발레
3. 공고 카드 클릭 > 상세 조회
4. "지원하기" 버튼 클릭
5. 확인 모달 > 지원하기
6. 토스트: "지원이 완료되었습니다"

#### 5단계: 지원 현황 확인
1. 하단 네비게이션 > 지원 현황
2. 상태별 탭 확인:
   - 전체
   - 검토중 (방금 지원한 공고)
   - 최종합격
   - 불합격

#### 예상 결과
- ✅ 회원가입 성공
- ✅ 프로필 저장 완료
- ✅ 인증 신청 완료
- ✅ 공고 지원 완료
- ✅ 지원 현황에 표시됨

---

### 시나리오 2: 학원 공고 등록 및 지원자 관리 플로우

#### 1단계: 학원 로그인
- **계정**: `academy1@test.com` / `password123`

#### 2단계: 공고 등록
1. 상단 헤더 > (+) 버튼 클릭
2. 공고 정보 입력:
   - 제목: `테스트 발레 강사 모집`
   - 지역: 서울 > 강남구
   - 장르: 발레
   - 담당 수업: 초등반
   - 근무 요일: 월, 수, 금
   - 시간: 14:00-17:00
   - 급여 유형: 시급
   - 급여: 50,000원
   - 상세 설명 작성
3. "등록하기" 클릭
4. 토스트: "관리자 검토 후 공고가 게시됩니다"

#### 3단계: 공고 관리
1. 하단 네비게이션 > 공고 관리
2. 상태별 탭:
   - 전체
   - 게시중
   - **검토 대기** (방금 등록한 공고)
   - 마감
3. 공고 카드 확인

#### 4단계: 지원자 확인
1. 하단 네비게이션 > 지원자 관리
2. 공고 선택: "주말 발레 강사 모집"
3. 지원자 목록 확인:
   - 새 지원 (빨간 점 표시)
   - 검토중
   - 채용 확정
   - 불합격

#### 5단계: 지원자 프로필 조회 및 채용 결정
1. 지원자 카드 클릭
2. 강사 상세 프로필 확인:
   - 기본 정보
   - 인증 배지
   - 경력 및 학력
   - 자기소개
3. 하단 액션 버튼:
   - **[채용 확정]** 클릭
   - 확인 모달 > 확정
4. 토스트: "채용이 확정되었습니다"
5. 강사에게 자동 알림 발송

#### 6단계: 리뷰 작성
1. 학원 관리 > 채용 현황
2. 채용된 강사 목록 확인
3. [리뷰 작성하기] 클릭
4. 평점 선택 (1-5점)
5. 리뷰 내용 작성 (최소 10자)
6. "완료" 클릭

#### 예상 결과
- ✅ 공고 등록 완료 (검토 대기 상태)
- ✅ 지원자 목록 조회 가능
- ✅ 지원자 상세 프로필 확인 가능
- ✅ 채용 확정 처리 완료
- ✅ 강사에게 알림 발송
- ✅ 리뷰 작성 완료

---

### 시나리오 3: 관리자 인증 검토 플로우

#### 1단계: 관리자 로그인
- **계정**: `admin@d-class.com` / `admin123!@#`

#### 2단계: 대시보드 확인
1. 통계 카드 확인:
   - 총 회원 수
   - 인증 대기 건수
   - 게시중 공고 수
   - 신규 가입
2. 최근 활동 타임라인

#### 3단계: 인증 서류 검토
1. 측면 네비게이션 > 인증 관리
2. 좌측: 대기중인 서류 목록
   - 이름, 유형(강사/학원), 제출일
   - 대기 건수 배지
3. 서류 선택
4. 우측: 서류 이미지 뷰어
   - 확대/축소
5. 하단 액션:
   - **[승인]** 또는 **[반려]**
   
#### 4-A단계: 승인 처리
1. [승인] 클릭
2. 확인 모달: "승인하시겠습니까?"
3. 신청자에게 "인증 완료" 알림 발송
4. 다음 대기 서류 자동 로드

#### 4-B단계: 반려 처리
1. [반려] 클릭
2. 반려 사유 입력 모달
3. 사유 작성 후 확인
4. 신청자에게 반려 사유와 함께 알림 발송

#### 5단계: 공고 관리
1. 측면 네비게이션 > 공고 관리
2. 검색 및 필터:
   - 공고 제목 검색
   - 상태 필터 (전체/게시중/마감)
3. 공고 목록 테이블 확인
4. 부적절한 공고 숨김 처리:
   - [공고 숨기기] 클릭
   - 사유 입력
   - 학원에 알림 발송

#### 예상 결과
- ✅ 대시보드 통계 표시
- ✅ 인증 서류 조회 가능
- ✅ 승인/반려 처리 완료
- ✅ 신청자에게 알림 발송
- ✅ 공고 관리 기능 작동

---

### 시나리오 4: 강사 검색 및 찜 기능

#### 1단계: 로그인
- **계정**: `instructor1@test.com` / `password123`

#### 2단계: 공고 검색
1. 상단 헤더 > 검색 아이콘 클릭
2. 검색어 입력: "발레"
3. 실시간 검색 결과 표시 (500ms 디바운스)
4. 검색 결과 카드 목록

#### 3단계: 필터링
1. 홈 화면으로 돌아가기
2. 필터 칩 선택:
   - 지역: 서울 > 강남구
   - 장르: 발레
   - 근무 시간: 오후
3. 정렬: 급여 높은 순
4. 필터된 결과 확인

#### 4단계: 찜하기
1. 관심있는 공고 카드에서 하트 아이콘 클릭
2. 하트 애니메이션 (채워짐)
3. 하단 네비게이션 > 찜한 공고
4. 찜한 공고 목록 확인

#### 5단계: 찜 해제
1. 찜한 공고 목록에서 하트 아이콘 다시 클릭
2. 즉시 목록에서 제거 (확인 없이)

#### 예상 결과
- ✅ 검색 기능 작동 (디바운싱)
- ✅ 필터링 및 정렬 작동
- ✅ 찜하기 기능 작동
- ✅ 찜한 공고 목록 표시

---

### 시나리오 5: 알림 시스템

#### 1단계: 강사 로그인 (지원 결과 알림)
- **계정**: `instructor1@test.com` / `password123`

#### 2단계: 알림 확인
1. 상단 헤더 > 알림 아이콘 (빨간 점 표시)
2. 읽지 않은 알림 개수 배지: 1
3. 알림 페이지로 이동

#### 3단계: 알림 목록
- **안읽은 알림** (연한 파란색 배경):
  - "지원 결과 안내"
  - "평일 오후 컨템포러리 댄스 강사 공고에 최종 합격하셨습니다!"
  
- **읽은 알림** (흰색 배경):
  - "지원 결과 안내 - 불합격"
  - "인증 완료"

#### 4단계: 알림 인터랙션
1. 알림 카드 클릭:
   - 자동으로 읽음 처리
   - 관련 페이지로 이동 (예: 지원 현황)
2. 좌측 스와이프: 알림 삭제
3. [모두 읽음] 버튼: 모든 알림 읽음 처리

#### 5단계: 학원 알림 확인
- **계정 전환**: `academy1@test.com` / `password123`
- 알림 유형:
  - "새로운 지원자" (빨간 점)
  - 공고 마감 임박
  - 리뷰 작성 요청

#### 예상 결과
- ✅ 알림 개수 배지 표시
- ✅ 읽음/안읽음 상태 구분
- ✅ 알림 클릭 시 관련 페이지 이동
- ✅ 알림 삭제 및 읽음 처리 작동

---

## 🗂️ Mock 데이터 구조

### 공고 데이터
- 총 6개의 공고
- 상태: 게시중(4), 마감(1), 검토 대기(1)
- 지역: 서울 강남구, 마포구
- 장르: 발레, 현대무용, 힙합, 재즈

### 지원 데이터
- 총 5개의 지원 내역
- 상태: 지원 완료(1), 검토중(2), 합격(1), 불합격(1)

### 리뷰 데이터
- 총 4개의 리뷰
- 학원 리뷰 3개, 강사 리뷰 1개
- 평점: 3-5점

### 알림 데이터
- 총 6개의 알림
- 강사 알림 3개, 학원 알림 3개
- 읽음/안읽음 상태 포함

## 🔧 Mock API 엔드포인트

### 인증
- `POST /api/auth/login` - 로그인
- `POST /api/auth/signup` - 회원가입
- `GET /api/auth/check-email` - 이메일 중복 확인
- `POST /api/auth/logout` - 로그아웃
- `GET /api/auth/me` - 내 정보 조회

### 공고
- `GET /api/jobs` - 공고 목록 (필터링, 정렬, 페이지네이션)
- `GET /api/jobs/:id` - 공고 상세
- `POST /api/jobs` - 공고 등록
- `PUT /api/jobs/:id` - 공고 수정
- `DELETE /api/jobs/:id` - 공고 삭제
- `POST /api/jobs/:id/close` - 공고 마감
- `GET /api/jobs/search` - 공고 검색

### 지원
- `POST /api/applications` - 지원하기
- `GET /api/instructors/:id/applications` - 내 지원 현황
- `GET /api/jobs/:id/applications` - 공고별 지원자 목록
- `GET /api/academies/:id/applications` - 학원의 전체 지원자
- `PATCH /api/applications/:id/status` - 지원 상태 변경
- `DELETE /api/applications/:id` - 지원 취소

### 리뷰
- `GET /api/academies/:id/reviews` - 학원 리뷰 목록
- `GET /api/instructors/:id/reviews` - 강사 리뷰 목록
- `GET /api/users/:id/reviews` - 내가 작성한 리뷰
- `POST /api/reviews` - 리뷰 작성
- `PUT /api/reviews/:id` - 리뷰 수정
- `DELETE /api/reviews/:id` - 리뷰 삭제

### 알림
- `GET /api/users/:id/notifications` - 내 알림 목록
- `GET /api/users/:id/notifications/unread-count` - 읽지 않은 알림 개수
- `PATCH /api/notifications/:id/read` - 알림 읽음 처리
- `POST /api/users/:id/notifications/read-all` - 모든 알림 읽음
- `DELETE /api/notifications/:id` - 알림 삭제

## 🎯 Mock API 커스터마이징

### Mock 데이터 추가

`src/mocks/data/` 폴더의 파일을 수정하여 데이터를 추가할 수 있습니다:

```javascript
// src/mocks/data/jobs.js
export const jobs = [
  {
    id: 'job-new',
    academyId: 'academy-1',
    title: '새로운 공고',
    // ... 기타 필드
  },
  // 기존 공고들...
]
```

### 핸들러 추가

`src/mocks/handlers/` 폴더에 새로운 핸들러 파일을 추가:

```javascript
// src/mocks/handlers/favorites.js
import { http, HttpResponse } from 'msw'
import env from '@/utils/env'

const API_URL = env.api.baseUrl

export const favoriteHandlers = [
  http.post(`${API_URL}/favorites`, async ({ request }) => {
    // 찜하기 로직
    return HttpResponse.json({ success: true })
  }),
]
```

그리고 `src/mocks/handlers/index.js`에 추가:

```javascript
import { favoriteHandlers } from './favorites'

export const handlers = [
  // ... 기존 핸들러들
  ...favoriteHandlers,
]
```

## 🐛 트러블슈팅

### Mock API가 작동하지 않을 때

1. **Service Worker 확인**:
   - 브라우저 개발자 도구 > Application > Service Workers
   - `mockServiceWorker.js`가 등록되어 있는지 확인

2. **콘솔 확인**:
   - 콘솔에 "🎭 Mock API가 활성화되었습니다!" 메시지가 있는지 확인

3. **캐시 삭제**:
   ```bash
   rm -rf node_modules/.vite
   npm run dev
   ```

### API 요청이 실제 서버로 전송될 때

- MSW는 개발 환경(`import.meta.env.DEV`)에서만 작동합니다
- 프로덕션 빌드(`npm run build`)에서는 비활성화됩니다

### 응답 시간 조절

핸들러에서 지연 시간을 추가할 수 있습니다:

```javascript
http.get(`${API_URL}/jobs`, async () => {
  // 500ms 지연
  await new Promise(resolve => setTimeout(resolve, 500))
  
  return HttpResponse.json({ /* 데이터 */ })
})
```

## 📝 다음 단계

1. ✅ Mock API로 프론트엔드 개발 및 테스트
2. ⏳ 백엔드 API 엔드포인트 정의 및 개발
3. ⏳ Mock API 핸들러를 참고하여 실제 API 구현
4. ⏳ 프론트엔드에서 Mock API → 실제 API로 전환
5. ⏳ 통합 테스트

## 🆘 도움이 필요하신가요?

문제가 발생하거나 추가 Mock 데이터가 필요한 경우:
1. `src/mocks/data/` 폴더의 데이터 파일 확인
2. `src/mocks/handlers/` 폴더의 핸들러 파일 확인
3. 브라우저 콘솔에서 에러 메시지 확인

Mock API는 실제 백엔드 API와 동일한 구조로 설계되어 있어, 나중에 실제 API로 전환할 때 최소한의 코드 변경만 필요합니다! 🎉

